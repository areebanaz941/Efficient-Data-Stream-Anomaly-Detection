# Efficient Data Stream Anomaly Detection

## Project Overview
This project focuses on developing a Python script for detecting anomalies in a continuous data stream. The data stream simulates real-time sequences of floating-point numbers, representing various metrics such as financial transactions or system metrics. In real-time, the goal is to identify unusual patterns, such as exceptionally high values or deviations from the norm.

## Algorithm Selection
For this project, we have chosen the z-score-based anomaly detection algorithm. The z-score, also known as the standard score, measures how many standard deviations an observation is from the mean of a dataset. By calculating the z-score for each data point in a sliding window, we can identify anomalies based on a predefined threshold.

The z-score-based algorithm is simple, intuitive, and computationally efficient, making it suitable for real-time anomaly detection. It can adapt to concept drift and seasonal variations by continuously updating the sliding window and recalculating the mean and standard deviation.

## Data Stream Simulation
We have designed a function called `generate_real_time_data_stream()` to simulate a data stream. This function generates data points at regular intervals, incorporating the following components:
- Trend: A gradual increase or decrease in the data over time.
- Seasonality: Periodic patterns that repeat at fixed intervals.
- Noise: Random fluctuations added to the data.
- Anomalies: Occasional exceptionally high or low values that deviate significantly from the norm.

The function uses mathematical equations and random number generation to create a realistic data stream.

## Anomaly Detection
The anomaly detection mechanism is implemented in the `AnomalyDetector` class. It maintains a sliding window of data points and calculates the z-score for each new data point. If the absolute value of the z-score exceeds a specified threshold, the data point is considered an anomaly.

The `is_anomaly()` method of the `AnomalyDetector` class performs anomaly detection in real-time as the data is streamed. It continuously updates the sliding window and checks for anomalies based on the z-score threshold.

## Optimization
To ensure optimal performance, we have implemented the following optimizations:
- The sliding window is implemented using a `deque` (double-ended queue) from the `collections` module, which allows efficient insertion and deletion of elements at both ends.
- The z-score calculation is performed using the `zscore()` function from the `scipy.stats` module, which is optimized for performance.
- The anomaly detection is performed only for new data points, avoiding redundant calculations.

## Visualization
We have created a real-time visualization tool to display the data stream and detect anomalies. The visualization consists of two components:
1. Data Stream Plot: A line plot that shows the data points over time, with anomalies marked in red.
2. Interactive Map: A geographic map that displays the locations of the data points, with anomalies highlighted using markers.

The visualization is implemented using the Matplotlib and Folium libraries. The data stream plot is updated in real time as new data points arrive, and the interactive map is saved as an HTML file for each batch of data points.

## Results
Here are some examples of the visualizations generated by the project:

1. Data Stream Plot:
![Data Stream Plot](data_stream_plot.png)

2. Interactive Map:
![Interactive Map](interactive_map.png)

The data stream plot effectively visualizes the data points over time, with anomalies marked in red. The interactive map provides a spatial representation of the data points and highlights the locations of anomalies.

## Conclusion
The developed Python script successfully detects anomalies in a continuous data stream using the z-score-based algorithm. The algorithm is optimized for speed and efficiency, and the real-time visualization tool provides clear insights into the data stream and detected anomalies.

The project fulfills the objectives of algorithm selection, data stream simulation, anomaly detection, optimization, and visualization. The code is well-documented, and error handling and data validation are implemented to ensure robustness.

The z-score-based algorithm proves to be effective for detecting anomalies in this scenario, adapting to concept drift and seasonal variations. However, it may have limitations in handling more complex patterns or non-normal distributions. In such cases, alternative algorithms like Isolation Forest, Local Outlier Factor (LOF), or DBSCAN clustering can be explored.

Overall, this project demonstrates the successful implementation of an efficient data stream anomaly detection system using Python.

## Files
- `anomaly_detection.py`: The main Python script containing the anomaly detection algorithm, data stream simulation, and visualization.
- `README.md`: Project documentation and explanation.
- `requirements.txt`: List of external libraries required to run the project.
